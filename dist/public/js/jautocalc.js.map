{"version":3,"sources":["../../../Finance_api/public/js/jautocalc.js"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","init","destroy","_utils__WEBPACK_IMPORTED_MODULE_0__","_autocalc__WEBPACK_IMPORTED_MODULE_1__","NAMESPACE","TAG","EVENTS","jq","opts","vars","funcs","each","$ctx","$","attribute","$this","eq","attr","fields","length","keyEventsFire","fireEvents","split","join","field","equation","equationFields","result","context","e","data","readOnlyResults","initFire","change","unbind","removeAttr","autoCalc","_parse__WEBPACK_IMPORTED_MODULE_0__","_utils__WEBPACK_IMPORTED_MODULE_1__","ctx","resultValue","numberFormat","dec","decPlaces","thou","sym","symLoc","func","f","RegExp","rgx","exec","v","replace","fieldValue","val","numValue","decimalOpts","thousandOpts","tmp","smartIntegers","isFunction","onShowResult","chainFire","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","parseFloat","Math","min","apply","map","max","a","grep","_admin__WEBPACK_IMPORTED_MODULE_1__","_functions__WEBPACK_IMPORTED_MODULE_2__","_parse__WEBPACK_IMPORTED_MODULE_3__","fn","jAutoCalc","assign","method","extend","defaults","publicMethods","args","arg","toString","decimalPlaces","showParseError","emptyAsZero","parse","ops","op","precedence","assoc","pow","exp","pi","atan2","parseVal","startOffset","offset","match","indexOf","string","substr","negate","parseExpr","error","Error","parseOp","stack","tos","pop","push","str","alert","findFields","getFieldSelector","numCleanse","numberFix","test","sepOpts","concat","numOpts","ch","decLoc","z","charAt","inArray","arguments","num","toFixed","x","x2","x1","jQuery"],"mappings":"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","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// define __esModule on exports\r\n/******/ \t__webpack_require__.r = function(exports) {\r\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\r\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\r\n/******/ \t\t}\r\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\r\n/******/ \t};\r\n/******/\r\n/******/ \t// create a fake namespace object\r\n/******/ \t// mode & 1: value is a module id, require it\r\n/******/ \t// mode & 2: merge all properties of value into the ns\r\n/******/ \t// mode & 4: return value when already ns object\r\n/******/ \t// mode & 8|1: behave like require\r\n/******/ \t__webpack_require__.t = function(value, mode) {\r\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\r\n/******/ \t\tif(mode & 8) return value;\r\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\r\n/******/ \t\tvar ns = Object.create(null);\r\n/******/ \t\t__webpack_require__.r(ns);\r\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\r\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\r\n/******/ \t\treturn ns;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\";\r\n/******/\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ({\r\n\r\n/***/ \"./src/admin.ts\":\r\n/*!**********************!*\\\r\n  !*** ./src/admin.ts ***!\r\n  \\**********************/\r\n/*! exports provided: init, destroy */\r\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\r\n\r\n\"use strict\";\r\n__webpack_require__.r(__webpack_exports__);\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return init; });\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"destroy\", function() { return destroy; });\r\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\r\n/* harmony import */ var _autocalc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./autocalc */ \"./src/autocalc.ts\");\r\n\r\n\r\nconst NAMESPACE = 'jautocalc';\r\nconst TAG = '_' + NAMESPACE;\r\nlet EVENTS = 'focus change blur';\r\nfunction init(jq, opts, vars, funcs) {\r\n    return jq.each(function () {\r\n        const $ctx = $(this);\r\n        $('[' + opts.attribute + ']:not([' + TAG + '])', $ctx).each(function () {\r\n            const $this = $(this);\r\n            const eq = $this.attr(opts.attribute);\r\n            const fields = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"findFields\"])(eq);\r\n            if (fields.length == 0) {\r\n                return;\r\n            }\r\n            for (let i = 0; i < fields.length; i++) {\r\n                if ($(Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getFieldSelector\"])(fields[i]), $ctx).length == 0) {\r\n                    return;\r\n                }\r\n            }\r\n            if (opts.keyEventsFire) {\r\n                EVENTS += ' keyup keydown keypress';\r\n            }\r\n            const fireEvents = EVENTS.split(' ').join('.' + NAMESPACE + ' ');\r\n            for (let i = 0; i < fields.length; i++) {\r\n                const field = fields[i];\r\n                $(Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getFieldSelector\"])(field), $ctx).bind(fireEvents, {\r\n                    equation: eq,\r\n                    equationFields: fields,\r\n                    result: $this,\r\n                    context: $ctx,\r\n                    opts: opts,\r\n                    vars: vars,\r\n                    funcs: funcs\r\n                }, function (e) {\r\n                    Object(_autocalc__WEBPACK_IMPORTED_MODULE_1__[\"autoCalc\"])(e.data.equation, e.data.equationFields, e.data.result, e.data.context, e.data.opts, e.data.vars, e.data.funcs);\r\n                });\r\n            }\r\n            if (opts.readOnlyResults) {\r\n                $this.attr('readonly', 'readonly');\r\n            }\r\n            $this.attr(TAG, TAG);\r\n            if (opts.initFire) {\r\n                $(Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getFieldSelector\"])(fields[0]), $ctx).change();\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction destroy(jq, opts) {\r\n    return jq.each(function () {\r\n        const $ctx = $(this);\r\n        $('[' + opts.attribute + '][' + TAG + ']', $ctx).each(function () {\r\n            const $this = $(this);\r\n            const eq = $this.attr(opts.attribute);\r\n            const fields = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"findFields\"])(eq);\r\n            if (fields.length == 0) {\r\n                return;\r\n            }\r\n            for (let i = 0; i < fields.length; i++) {\r\n                const field = fields[i];\r\n                $(Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getFieldSelector\"])(field), $ctx).unbind('.' + NAMESPACE);\r\n            }\r\n            if (opts.readOnlyResults) {\r\n                $this.removeAttr('readonly');\r\n            }\r\n            $this.removeAttr(TAG);\r\n        });\r\n    });\r\n}\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/autocalc.ts\":\r\n/*!*************************!*\\\r\n  !*** ./src/autocalc.ts ***!\r\n  \\*************************/\r\n/*! exports provided: autoCalc */\r\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\r\n\r\n\"use strict\";\r\n__webpack_require__.r(__webpack_exports__);\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"autoCalc\", function() { return autoCalc; });\r\n/* harmony import */ var _parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parse */ \"./src/parse.ts\");\r\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\r\n\r\n\r\nfunction autoCalc(eq, fields, result, ctx, opts, vars, funcs) {\r\n    let resultValue = '';\r\n    const numberFormat = {\r\n        dec: '',\r\n        decPlaces: -1,\r\n        thou: '',\r\n        sym: '',\r\n        symLoc: -1\r\n    };\r\n    for (const func in funcs) {\r\n        const f = funcs[func];\r\n        const r = new RegExp(f.rgx, 'gi');\r\n        let m;\r\n        while ((m = r.exec(eq)) != null) {\r\n            const v = f.exec(m[1], ctx, opts, numberFormat);\r\n            eq = eq.replace(new RegExp(f.rgx, 'gi'), v);\r\n        }\r\n    }\r\n    for (let i = 0; i < fields.length; i++) {\r\n        const field = fields[i];\r\n        const fieldValue = $(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getFieldSelector\"])(field), ctx).val();\r\n        const numValue = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"numCleanse\"])(fieldValue, opts, numberFormat);\r\n        if (numValue.length == 0) {\r\n            result.val('').change();\r\n            return;\r\n        }\r\n        eq = eq.replace(new RegExp('{' + field + '}', 'g'), numValue);\r\n    }\r\n    eq = eq.replace(/ /g, '');\r\n    if (numberFormat.dec == '') {\r\n        numberFormat.dec = opts.decimalOpts[0];\r\n    }\r\n    if (numberFormat.decPlaces == -1) {\r\n        numberFormat.decPlaces = 0;\r\n    }\r\n    if (numberFormat.thou == '') {\r\n        numberFormat.thou = opts.thousandOpts[0];\r\n    }\r\n    const tmp = Object(_parse__WEBPACK_IMPORTED_MODULE_0__[\"parse\"])(eq, opts);\r\n    if (tmp == null) {\r\n        resultValue = '';\r\n    }\r\n    else {\r\n        resultValue = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"numberFix\"])(tmp, numberFormat.decPlaces);\r\n    }\r\n    resultValue = resultValue.replace(/\\./g, '<c>');\r\n    resultValue = resultValue.replace(/\\,/g, '<t>');\r\n    resultValue = resultValue.replace(/<c>/g, numberFormat.dec);\r\n    resultValue = resultValue.replace(/<t>/g, numberFormat.thou);\r\n    if (numberFormat.symLoc > -1) {\r\n        if (numberFormat.symLoc == 0) {\r\n            resultValue = numberFormat.sym + resultValue;\r\n        }\r\n        else {\r\n            resultValue = resultValue + numberFormat.sym;\r\n        }\r\n    }\r\n    if (opts.smartIntegers) {\r\n        resultValue = resultValue.replace(/[\\,\\.]0+$/, '');\r\n    }\r\n    if ($.isFunction(opts.onShowResult)) {\r\n        resultValue = opts.onShowResult.call(result, resultValue);\r\n    }\r\n    result.val(resultValue);\r\n    if (opts.chainFire) {\r\n        result.change();\r\n    }\r\n}\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/functions.ts\":\r\n/*!**************************!*\\\r\n  !*** ./src/functions.ts ***!\r\n  \\**************************/\r\n/*! exports provided: funcs */\r\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\r\n\r\n\"use strict\";\r\n__webpack_require__.r(__webpack_exports__);\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"funcs\", function() { return funcs; });\r\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"jquery\");\r\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\r\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\r\n\r\n\r\nconst funcs = {\r\n    'sum': {\r\n        rgx: 'sum\\\\({([^}]+)}\\\\)',\r\n        exec: function (field, ctx, opts, numberFormat) {\r\n            let m = 0;\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getFieldSelector\"])(field), ctx).each(function () {\r\n                const n = parseFloat(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"numCleanse\"])(jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).val(), opts, numberFormat));\r\n                m += n;\r\n            });\r\n            return m;\r\n        }\r\n    },\r\n    'avg': {\r\n        rgx: 'avg\\\\({([^}]+)}\\\\)',\r\n        exec: function (field, ctx, opts, numberFormat) {\r\n            let m = 0;\r\n            const c = jquery__WEBPACK_IMPORTED_MODULE_0___default()(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getFieldSelector\"])(field), ctx).each(function () {\r\n                const n = parseFloat(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"numCleanse\"])(jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).val(), opts, numberFormat));\r\n                m += n;\r\n            }).length;\r\n            return m / c;\r\n        }\r\n    },\r\n    'min': {\r\n        rgx: 'min\\\\({([^}]+)}\\\\)',\r\n        exec: function (field, ctx, opts, numberFormat) {\r\n            return Math.min.apply(this, jquery__WEBPACK_IMPORTED_MODULE_0___default()(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getFieldSelector\"])(field), ctx).map(function (i, e) {\r\n                return Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"numCleanse\"])(jquery__WEBPACK_IMPORTED_MODULE_0___default()(e).val(), opts, numberFormat);\r\n            }).get());\r\n        }\r\n    },\r\n    'max': {\r\n        rgx: 'max\\\\({([^}]+)}\\\\)',\r\n        exec: function (field, ctx, opts, numberFormat) {\r\n            return Math.max.apply(this, jquery__WEBPACK_IMPORTED_MODULE_0___default()(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getFieldSelector\"])(field), ctx).map(function (i, e) {\r\n                return Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"numCleanse\"])(jquery__WEBPACK_IMPORTED_MODULE_0___default()(e).val(), opts, numberFormat);\r\n            }).get());\r\n        }\r\n    },\r\n    'count': {\r\n        rgx: 'count\\\\({([^}]+)}\\\\)',\r\n        exec: function (field, ctx) {\r\n            return jquery__WEBPACK_IMPORTED_MODULE_0___default()(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getFieldSelector\"])(field), ctx).length;\r\n        }\r\n    },\r\n    'countNotEmpty': {\r\n        rgx: 'countNotEmpty\\\\({([^}]+)}\\\\)',\r\n        exec: function (field, ctx) {\r\n            return jquery__WEBPACK_IMPORTED_MODULE_0___default.a.grep(jquery__WEBPACK_IMPORTED_MODULE_0___default()(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getFieldSelector\"])(field), ctx), function (n) {\r\n                const val = jquery__WEBPACK_IMPORTED_MODULE_0___default()(n).val() + '';\r\n                return val.length > 0;\r\n            }).length;\r\n        }\r\n    }\r\n};\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/index.ts\":\r\n/*!**********************!*\\\r\n  !*** ./src/index.ts ***!\r\n  \\**********************/\r\n/*! no exports provided */\r\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\r\n\r\n\"use strict\";\r\n__webpack_require__.r(__webpack_exports__);\r\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"jquery\");\r\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\r\n/* harmony import */ var _admin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./admin */ \"./src/admin.ts\");\r\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./functions */ \"./src/functions.ts\");\r\n/* harmony import */ var _parse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./parse */ \"./src/parse.ts\");\r\n\r\n\r\n\r\n\r\njquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.jAutoCalc = Object.assign(function (...args) {\r\n    let method = 'init';\r\n    let o = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.jAutoCalc.defaults);\r\n    const publicMethods = {\r\n        init: _admin__WEBPACK_IMPORTED_MODULE_1__[\"init\"],\r\n        destroy: _admin__WEBPACK_IMPORTED_MODULE_1__[\"destroy\"]\r\n    };\r\n    for (const arg of args) {\r\n        if (typeof arg === 'string') {\r\n            method = arg.toString();\r\n        }\r\n        if (typeof arg === 'object') {\r\n            o = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend(o, arg);\r\n        }\r\n    }\r\n    const f = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, _functions__WEBPACK_IMPORTED_MODULE_2__[\"funcs\"], o.funcs);\r\n    const v = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend([], _parse__WEBPACK_IMPORTED_MODULE_3__[\"vars\"], o.vars);\r\n    if (publicMethods[method]) {\r\n        return publicMethods[method](this, o, v, f);\r\n    }\r\n    else {\r\n        return Object(_admin__WEBPACK_IMPORTED_MODULE_1__[\"init\"])(this, o, v, f);\r\n    }\r\n}, {\r\n    defaults: {\r\n        attribute: 'jAutoCalc',\r\n        thousandOpts: [',', '.', ' '],\r\n        decimalOpts: ['.', ','],\r\n        decimalPlaces: -1,\r\n        initFire: true,\r\n        chainFire: true,\r\n        keyEventsFire: false,\r\n        readOnlyResults: true,\r\n        showParseError: true,\r\n        emptyAsZero: false,\r\n        smartIntegers: false,\r\n        onShowResult: null,\r\n        funcs: {},\r\n        vars: {}\r\n    }\r\n});\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/parse.ts\":\r\n/*!**********************!*\\\r\n  !*** ./src/parse.ts ***!\r\n  \\**********************/\r\n/*! exports provided: vars, parse */\r\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\r\n\r\n\"use strict\";\r\n__webpack_require__.r(__webpack_exports__);\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"vars\", function() { return vars; });\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parse\", function() { return parse; });\r\nconst ops = {\r\n    '+': {\r\n        op: '+',\r\n        precedence: 10,\r\n        assoc: 'L',\r\n        exec: function (l, r) {\r\n            return l + r;\r\n        }\r\n    },\r\n    '-': {\r\n        op: '-',\r\n        precedence: 10,\r\n        assoc: 'L',\r\n        exec: function (l, r) {\r\n            return l - r;\r\n        }\r\n    },\r\n    '*': {\r\n        op: '*',\r\n        precedence: 20,\r\n        assoc: 'L',\r\n        exec: function (l, r) {\r\n            return l * r;\r\n        }\r\n    },\r\n    '/': {\r\n        op: '/',\r\n        precedence: 20,\r\n        assoc: 'L',\r\n        exec: function (l, r) {\r\n            return l / r;\r\n        }\r\n    },\r\n    '**': {\r\n        op: '**',\r\n        precedence: 30,\r\n        assoc: 'R',\r\n        exec: function (l, r) {\r\n            return Math.pow(l, r);\r\n        }\r\n    }\r\n};\r\nconst vars = {\r\n    e: Math.exp(1),\r\n    pi: Math.atan2(1, 1) * 4\r\n};\r\nfunction parseVal(r) {\r\n    const startOffset = r.offset;\r\n    let value;\r\n    let match;\r\n    value = 0;\r\n    while ('0123456789'.indexOf(r.string.substr(r.offset, 1)) >= 0 && r.offset < r.string.length) {\r\n        r.offset++;\r\n    }\r\n    if (r.string.substr(r.offset, 1) == '.') {\r\n        r.offset++;\r\n        while ('0123456789'.indexOf(r.string.substr(r.offset, 1)) >= 0 && r.offset < r.string.length) {\r\n            r.offset++;\r\n        }\r\n    }\r\n    if (r.offset > startOffset) {\r\n        return parseFloat(r.string.substr(startOffset, r.offset - startOffset));\r\n    }\r\n    else if (r.string.substr(r.offset, 1) == '+') {\r\n        r.offset++;\r\n        return parseVal(r);\r\n    }\r\n    else if (r.string.substr(r.offset, 1) == '-') {\r\n        r.offset++;\r\n        return negate(parseVal(r));\r\n    }\r\n    else if (r.string.substr(r.offset, 1) == '(') {\r\n        r.offset++;\r\n        value = parseExpr(r);\r\n        if (r.string.substr(r.offset, 1) == ')') {\r\n            r.offset++;\r\n            return value;\r\n        }\r\n        r.error = \"Parsing error: ')' expected\";\r\n        throw new Error('parseError');\r\n    }\r\n    else if ((match = /^[a-z_][a-z0-9_]*/i.exec(r.string.substr(r.offset))) != null) {\r\n        const name = match[0];\r\n        r.offset += name.length;\r\n        if (name in vars) {\r\n            return vars[name];\r\n        }\r\n        r.error = \"Semantic error: unknown variable '\" + name + \"'\";\r\n        throw new Error('unknownVar');\r\n    }\r\n    else {\r\n        if (r.string.length == r.offset) {\r\n            r.error = 'Parsing error at end of string: value expected';\r\n            throw new Error('valueMissing');\r\n        }\r\n        else {\r\n            r.error = \"Parsing error: unrecognized value\";\r\n            throw new Error('valueNotParsed');\r\n        }\r\n    }\r\n}\r\n;\r\nfunction negate(value) {\r\n    return -value;\r\n}\r\n;\r\nfunction parseOp(r) {\r\n    if (r.string.substr(r.offset, 2) == '**') {\r\n        r.offset += 2;\r\n        return ops['**'];\r\n    }\r\n    if ('+-*/'.indexOf(r.string.substr(r.offset, 1)) >= 0) {\r\n        return ops[r.string.substr(r.offset++, 1)];\r\n    }\r\n    return null;\r\n}\r\n;\r\nfunction parseExpr(r) {\r\n    const stack = [{\r\n            precedence: 0,\r\n            assoc: 'L'\r\n        }];\r\n    let value = parseVal(r);\r\n    for (;;) {\r\n        const op = parseOp(r) || {\r\n            precedence: 0,\r\n            assoc: 'L'\r\n        };\r\n        while (op.precedence < stack[stack.length - 1].precedence ||\r\n            (op.precedence == stack[stack.length - 1].precedence && op.assoc == 'L')) {\r\n            const tos = stack.pop();\r\n            if (!tos.exec) {\r\n                return value;\r\n            }\r\n            value = tos.exec(tos.value, value);\r\n        }\r\n        stack.push({\r\n            op: op.op,\r\n            precedence: op.precedence,\r\n            assoc: op.assoc,\r\n            exec: op.exec,\r\n            value: value\r\n        });\r\n        value = parseVal(r);\r\n    }\r\n}\r\n;\r\nfunction parse(str, opts) {\r\n    const r = {\r\n        string: str,\r\n        offset: 0\r\n    };\r\n    try {\r\n        const value = parseExpr(r);\r\n        if (r.offset < r.string.length) {\r\n            r.error = 'Syntax error: junk found at offset ' + r.offset;\r\n            throw new Error('trailingJunk');\r\n        }\r\n        return value;\r\n    }\r\n    catch (e) {\r\n        if (opts.showParseError) {\r\n            alert(`${r.error} (${e}):\\n${r.string.substr(0, r.offset)}<*>${r.string.substr(r.offset)}`);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/utils.ts\":\r\n/*!**********************!*\\\r\n  !*** ./src/utils.ts ***!\r\n  \\**********************/\r\n/*! exports provided: findFields, getFieldSelector, numCleanse, numberFix */\r\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\r\n\r\n\"use strict\";\r\n__webpack_require__.r(__webpack_exports__);\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"findFields\", function() { return findFields; });\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getFieldSelector\", function() { return getFieldSelector; });\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"numCleanse\", function() { return numCleanse; });\r\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"numberFix\", function() { return numberFix; });\r\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"jquery\");\r\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\r\n\r\nfunction findFields(eq) {\r\n    const fields = [];\r\n    const r = /{([^}]+)}/gi;\r\n    let m;\r\n    while ((m = r.exec(eq)) != null) {\r\n        fields.push(m[1]);\r\n    }\r\n    return fields;\r\n}\r\n;\r\nfunction getFieldSelector(field) {\r\n    if (/^[a-zA-Z].*/.test(field)) {\r\n        return ':input[name=\"' + field + '\"]';\r\n    }\r\n    return field;\r\n}\r\n;\r\nfunction numCleanse(value, opts, numberFormat) {\r\n    const fieldValue = value + '';\r\n    const sepOpts = opts.decimalOpts.concat(opts.thousandOpts);\r\n    const numOpts = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-'];\r\n    let numValue = '';\r\n    let ch = '';\r\n    let dec = '';\r\n    let decLoc = -1;\r\n    let thou = '';\r\n    let sym = '';\r\n    let symLoc = -1;\r\n    let decPlaces = 0;\r\n    for (let z = fieldValue.length - 1; z >= 0; z--) {\r\n        ch = fieldValue.charAt(z);\r\n        if (jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(ch, numOpts) != -1) {\r\n            numValue = ch + numValue;\r\n        }\r\n        else {\r\n            if (dec == '' && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(ch, opts.decimalOpts) != -1) {\r\n                decLoc = z;\r\n                dec = ch;\r\n                numValue = '.' + numValue;\r\n            }\r\n            else if (thou == '' && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(ch, opts.thousandOpts) != -1) {\r\n                thou = ch;\r\n            }\r\n            else if (sym == '' && jquery__WEBPACK_IMPORTED_MODULE_0___default.a.inArray(ch, sepOpts) == -1 && (z == 0 || z == fieldValue.length - 1)) {\r\n                sym = ch;\r\n                symLoc = z;\r\n            }\r\n        }\r\n    }\r\n    if (dec != '') {\r\n        decPlaces = fieldValue.length - decLoc - 1;\r\n        if (symLoc > decLoc) {\r\n            decPlaces--;\r\n        }\r\n    }\r\n    if (opts.decimalPlaces != -1) {\r\n        decPlaces = opts.decimalPlaces;\r\n    }\r\n    if (arguments.length === 3) {\r\n        if (numberFormat.dec == '' && dec != '') {\r\n            numberFormat.dec = dec;\r\n        }\r\n        if ((numberFormat.decPlaces == -1 && decPlaces != -1) ||\r\n            (numberFormat.decPlaces != -1 && decPlaces != -1 && decPlaces < numberFormat.decPlaces)) {\r\n            numberFormat.decPlaces = decPlaces;\r\n        }\r\n        if (numberFormat.thou == '' && thou != '') {\r\n            numberFormat.thou = thou;\r\n        }\r\n        if (numberFormat.sym == '' && sym != '') {\r\n            numberFormat.sym = sym;\r\n            numberFormat.symLoc = symLoc;\r\n        }\r\n    }\r\n    if (opts.emptyAsZero && numValue == '') {\r\n        numValue = '0';\r\n    }\r\n    return numValue;\r\n}\r\n;\r\nfunction numberFix(num, decPlaces) {\r\n    const n = num.toFixed(decPlaces) + '';\r\n    const x = n.split('.');\r\n    const x2 = x.length > 1 ? '.' + x[1] : '';\r\n    const rgx = /(\\d+)(\\d{3})/;\r\n    let x1 = x[0];\r\n    while (rgx.test(x1)) {\r\n        x1 = x1.replace(rgx, '$1' + ',' + '$2');\r\n    }\r\n    return x1 + x2;\r\n}\r\n;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"jquery\":\r\n/*!*************************!*\\\r\n  !*** external \"jQuery\" ***!\r\n  \\*************************/\r\n/*! no static exports found */\r\n/***/ (function(module, exports) {\r\n\r\nmodule.exports = jQuery;\r\n\r\n/***/ })\r\n\r\n/******/ });\r\n//# sourceMappingURL=jautocalc.js.map"],"file":"jautocalc.js"}